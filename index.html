<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OuassVTC - Chauffeur VTC Perpignan</title>

  <meta name="description" content="OuassVTC - Chauffeur VTC Perpignan et ses alentours. R√©servation rapide, estimation instantan√©e, confort et s√©curit√©.">
  <meta name="keywords" content="VTC Perpignan, chauffeur priv√© Perpignan, taxi Perpignan, transport a√©roport Perpignan, VTC Canet, VTC Argel√®s, VTC Espagne">

  <link rel="icon" href="ouassvtc.png" type="image/png">
  <meta name="theme-color" content="#000000">

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-23LLHRH2QL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-23LLHRH2QL');

    function trackEvent(action, label){
      gtag('event', action, {
        event_category: 'Interaction',
        event_label: label
      });
    }
  </script>

  <style>
    :root{
      --bg:#f4f5f6;
      --surface:#ffffff;
      --border:#e5e7eb;
      --muted:#6b7280;
      --title:#0f172a;
      --brand:#000;
      --radius:18px;
      --navH:58px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:var(--bg);
      color:var(--title);
      line-height:1.4;
    }
    header{
      background:#000;
      color:#fff;
      text-align:center;
      padding:28px 18px;
    }
    header img{max-width:160px;display:block;margin:0 auto;}
    nav#topnav{
      position:sticky;top:0;z-index:50;
      background:rgba(255,255,255,.9);
      backdrop-filter:blur(10px);
      border-bottom:1px solid rgba(0,0,0,.03);
      display:flex;gap:12px;justify-content:center;
      padding:10px 14px;
    }
    nav#topnav a{
      text-decoration:none;
      color:#111;
      font-weight:600;
      font-size:14px;
      padding:8px 14px;
      border-radius:999px;
      transition:.15s;
    }
    nav#topnav a:hover{background:#f1f1f1}
    .page{
      max-width:1100px;
      margin:26px auto 40px;
      padding:0 16px;
      display:grid;
      gap:22px;
      grid-template-columns:1.1fr .9fr;
    }
    @media(max-width:900px){
      .page{grid-template-columns:1fr}
    }
    .hero-card{
      background:var(--surface);
      border:1px solid rgba(15,23,42,.02);
      border-radius:20px;
      padding:22px 20px 20px;
      box-shadow:0 18px 40px rgba(15,23,42,.04);
    }
    .hero-title{
      font-size:30px;
      font-weight:750;
      margin-bottom:4px;
      letter-spacing:-.01em;
    }
    .hero-sub{
      color:var(--muted);
      font-size:14.5px;
      margin-bottom:16px;
    }
    .badge-city{
      display:inline-flex;
      gap:6px;
      align-items:center;
      background:#eef2ff;
      color:#000;
      border-radius:999px;
      padding:6px 13px;
      font-size:12.5px;
      margin-bottom:10px;
      font-weight:600;
    }
    .main-button{
      margin-bottom:14px;
    }
    .btn-main{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:#000;
      color:#fff;
      border:none;
      border-radius:999px;
      padding:13px 24px;
      font-weight:650;
      font-size:14.5px;
      text-decoration:none;
      transition:transform .2s;
    }
    .btn-main:hover{transform:translateY(-1px);opacity:.96}
    /* boutons contact style app */
    .contact-buttons{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .contact-btn{
      flex:1 1 130px;
      min-width:140px;
      background:#f8fafc;
      border:1px solid #edf0f4;
      border-radius:16px;
      padding:10px 12px;
      display:flex;
      gap:10px;
      align-items:center;
      text-decoration:none;
      color:#0f172a;
      transition:.15s;
    }
    .contact-btn:hover{background:#fff}
    .contact-icon{
      width:34px;height:34px;background:#000;color:#fff;border-radius:14px;
      display:flex;align-items:center;justify-content:center;font-size:16px;
    }
    .contact-text strong{font-size:13.5px;display:block}
    .contact-text span{font-size:11.5px;color:#6b7280}
    /* bloc formulaire */
    .form-card{
      background:var(--surface);
      border-radius:20px;
      border:1px solid rgba(15,23,42,.02);
      box-shadow:0 18px 40px rgba(15,23,42,.03);
      padding:20px 20px 16px;
    }
    .form-title{
      font-weight:650;
      margin-bottom:4px;
    }
    .form-sub{
      color:#6b7280;
      font-size:13px;
      margin-bottom:14px;
    }
    label{display:block;font-size:13px;font-weight:600;margin-top:10px;margin-bottom:5px}
    input,select,textarea{
      width:100%;
      border:1px solid #e5e7eb;
      border-radius:12px;
      background:#f9fafb;
      padding:12px 11px;
      font-size:14px;
      transition:.15s;
    }
    input:focus,select:focus,textarea:focus{outline:none;border-color:#000;background:#fff}
    textarea{min-height:65px;resize:vertical}
    .form-buttons{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:18px;
    }
    .btn-secondary{
      background:#fff;
      border:1px solid #000;
      border-radius:999px;
      padding:11px 20px;
      font-weight:600;
      text-decoration:none;
      color:#000;
      cursor:pointer;
    }
    .btn-primary{
      background:#000;
      color:#fff;
      border:none;
      border-radius:999px;
      padding:11px 22px;
      font-weight:600;
      cursor:pointer;
    }
    /* aside */
    .aside-block{
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    .map-card{
      background:var(--surface);
      border-radius:20px;
      border:1px solid rgba(15,23,42,.02);
      box-shadow:0 18px 40px rgba(15,23,42,.03);
      padding:16px 16px 12px;
    }
    #map{height:280px;border-radius:16px;margin-top:10px}
    .links{
      text-align:center;
      font-size:12.5px;
      color:#6b7280;
      margin-top:8px;
    }
    footer{
      background:#000;
      color:#fff;
      text-align:center;
      padding:22px 16px 24px;
      font-size:12.5px;
      margin-top:18px;
    }
    footer a{color:#fff;text-decoration:none}
    /* estimation bar */
    .fare-sticky{
      position:fixed;top:var(--navH);left:50%;transform:translateX(-50%);
      width:min(1100px,92vw);
      background:#0f172a;
      border-radius:0 0 16px 16px;
      padding:12px 14px;
      display:none;
      z-index:60;
      box-shadow:0 12px 30px rgba(0,0,0,.25);
      color:#fff;
    }
    .fare-row{display:flex;justify-content:space-between;align-items:center;gap:14px}
    .fare-left{display:flex;gap:10px;align-items:center}
    .badge-est{background:#fff;color:#0f172a;font-weight:700;font-size:11px;padding:3px 9px;border-radius:999px}
    .fare-price{font-size:30px;font-weight:700}
    .fare-meta{font-size:12.5px;color:#d1d5db}
    .chip{font-size:11.5px;border:1px solid rgba(255,255,255,.12);padding:5px 10px;border-radius:999px}
    body.fare-open{padding-top:calc(var(--navH) + 70px);}
    @media(max-width:600px){
      .page{margin-top:14px}
      .hero-card,.form-card,.map-card{border-radius:16px}
      .contact-buttons{flex-direction:column}
      .fare-row{flex-direction:column;align-items:flex-start}
    }
  </style>
</head>
<body>
  <header>
    <img src="ouassvtc.png" alt="OuassVTC">
  </header>

  <nav id="topnav">
    <a href="services.html">Services VTC Perpignan</a>
    <a href="faq.html">FAQ</a>
    <a href="qui-sommes-nous.html">√Ä propos</a>
    <a href="contact.html">Contact</a>
  </nav>

  <div class="fare-sticky" id="fare">
    <div class="fare-row">
      <div class="fare-left">
        <span class="badge-est">Estimation</span>
        <div>
          <div class="fare-price" id="prixAffiche">-- ‚Ç¨</div>
          <div class="fare-meta" id="detailsTrajet">Distance : -- km ¬∑ Temps : --</div>
        </div>
      </div>
      <div class="chip">Tarif VTC Perpignan indicatif</div>
    </div>
  </div>

  <main class="page">
    <!-- gauche -->
    <section class="hero-card" aria-label="Chauffeur VTC Perpignan">
      <span class="badge-city">üöó VTC Perpignan & alentours</span>
      <h1 class="hero-title">Votre chauffeur VTC √† Perpignan</h1>
      <p class="hero-sub">R√©servation rapide, trajet confortable, disponibilit√© imm√©diate ou planifi√©e.</p>

      <div class="main-button">
        <a href="#introForm" class="btn-main" id="reserveBtn">üìÖ R√©servez maintenant</a>
      </div>

      <div class="contact-buttons" aria-label="Contact rapide VTC Perpignan">
        <a class="contact-btn" href="tel:0644120784" onclick="trackEvent('clic_appel','Appel VTC Perpignan')">
          <div class="contact-icon">üìû</div>
          <div class="contact-text">
            <strong>Appeler</strong>
            <span>Chauffeur disponible</span>
          </div>
        </a>
        <a class="contact-btn" href="https://wa.me/33644120784" target="_blank" rel="noopener" onclick="trackEvent('clic_whatsapp','WhatsApp VTC Perpignan')">
          <div class="contact-icon">üí¨</div>
          <div class="contact-text">
            <strong>WhatsApp</strong>
            <span>Demande de prix</span>
          </div>
        </a>
        <a class="contact-btn" href="sms:+33644120784" onclick="trackEvent('clic_sms','SMS VTC Perpignan')">
          <div class="contact-icon">‚úâÔ∏è</div>
          <div class="contact-text">
            <strong>SMS</strong>
            <span>Info rapide</span>
          </div>
        </a>
      </div>

      <!-- formulaire -->
      <div class="form-card" id="introForm" style="margin-top:16px;">
        <h2 class="form-title">Formulaire de r√©servation VTC Perpignan</h2>
        <p class="form-sub">Remplissez ce formulaire, nous vous confirmons le trajet au plus vite.</p>

        <form id="formResa" onsubmit="sendEmail(event)">
          <label for="nom">Nom et pr√©nom</label>
          <input type="text" id="nom" placeholder="Ex. Dupont Pierre" required>

          <label for="telephone">T√©l√©phone</label>
          <input type="tel" id="telephone" placeholder="06 xx xx xx xx" required>

          <label for="depart">Adresse de d√©part</label>
          <input type="text" id="depart" placeholder="Perpignan, Canet, Argel√®s..." required>

          <label for="arrivee">Adresse d'arriv√©e</label>
          <input type="text" id="arrivee" placeholder="A√©roport, gare, adresse..." required>

          <label for="dateheure">Date et heure</label>
          <input type="datetime-local" id="dateheure" required>

          <label for="passagers">Nombre de passagers</label>
          <select id="passagers" required>
            <option value="">S√©lectionner</option>
            <option>1</option><option>2</option><option>3</option><option>4</option>
          </select>

          <label for="paiement">Mode de paiement</label>
          <select id="paiement" required>
            <option value="">S√©lectionner</option>
            <option value="Lien de paiement s√©curis√©">Lien s√©curis√© (CB)</option>
            <option value="Paiement CB √† bord">CB √† bord</option>
            <option value="Paiement esp√®ces √† bord">Esp√®ces √† bord</option>
          </select>

          <label for="message">Informations compl√©mentaires</label>
          <textarea id="message" placeholder="Bagages, enfant, code porte..."></textarea>

          <div class="form-buttons">
            <button type="button" class="btn-secondary" onclick="calculerEstimation()">üí∂ Estimer le tarif</button>
            <button type="submit" class="btn-primary" id="btnSubmit">‚úÖ Envoyer le formulaire</button>
          </div>
        </form>
      </div>
    </section>

    <!-- droite -->
    <aside class="aside-block">
      <div class="map-card">
        <h3 style="font-size:14px;font-weight:650;">Itin√©raire VTC Perpignan</h3>
        <p style="font-size:12.5px;color:#6b7280;margin-top:2px;">Visualisez votre trajet estim√©.</p>
        <div id="map" role="region" aria-label="Carte de l'itin√©raire VTC"></div>
      </div>

      <div class="map-card" style="text-align:center;">
        <p style="font-size:13px;color:#0f172a;font-weight:600;">Besoin d‚Äôun devis sp√©cifique ?</p>
        <p style="font-size:12.5px;color:#6b7280;margin-top:3px;">Contact direct VTC Perpignan</p>
        <p style="margin-top:7px;font-size:13px;">
          üìû <a href="tel:0644120784" style="text-decoration:none;color:#000">06 44 12 07 84</a><br>
          üí¨ <a href="https://wa.me/33644120784" target="_blank" style="text-decoration:none;">WhatsApp</a><br>
          ‚úâÔ∏è <a href="mailto:contact@ouassvtc.fr" style="text-decoration:none;">contact@ouassvtc.fr</a>
        </p>
      </div>

      <p class="links">
        <a href="services.html">Services VTC</a> ¬∑
        <a href="faq.html">FAQ</a> ¬∑
        <a href="qui-sommes-nous.html">Qui sommes-nous ?</a>
      </p>
    </aside>
  </main>

  <footer>
    ¬© 2025 OuassVTC ‚Äì Chauffeur <strong>VTC Perpignan</strong>. 
    <br><a href="mentions-legales.html">Mentions l√©gales</a> ¬∑ <a href="politique-confidentialite.html">Confidentialit√©</a>
  </footer>

  <!-- MODAL -->
  <div id="successModal" class="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:200;align-items:center;justify-content:center;">
    <div style="background:#fff;border-radius:18px;padding:20px 18px 16px;max-width:360px;width:92%;text-align:center;">
      <div style="font-size:34px;margin-bottom:6px;">‚úÖ</div>
      <h2 style="font-size:17px;font-weight:700;margin-bottom:4px;">Formulaire envoy√©</h2>
      <p style="font-size:13px;color:#6b7280;margin-bottom:10px;">Nous revenons vers vous rapidement.</p>
      <button type="button" onclick="hideSuccessModal()" style="background:#000;color:#fff;border:none;border-radius:999px;padding:10px 16px;font-weight:600;cursor:pointer;">OK</button>
    </div>
  </div>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    emailjs.init("U08QGWWRUenJDOllc");
    let formEnvoye = false;

    function openFareBar(){
      const fare = document.getElementById('fare');
      document.body.classList.add('fare-open');
      fare.style.display = 'block';
    }

    async function sendEmail(e){
      e.preventDefault();
      if(formEnvoye){alert("Votre demande a d√©j√† √©t√© envoy√©e.");return;}
      formEnvoye = true;
      const btn=document.getElementById("btnSubmit");
      btn.disabled=true;
      const calc = await calculerEstimation();
      let prixStr = (calc && Number.isFinite(calc.prix)) ? calc.prix.toFixed(2) + " ‚Ç¨" : document.getElementById("prixAffiche").textContent || "";
      const params={
        nom:nom.value,
        telephone:telephone.value,
        depart:depart.value,
        arrivee:arrivee.value,
        dateheure:dateheure.value,
        passagers:passagers.value,
        paiement:paiement.value,
        message:message.value,
        prix:prixStr
      };
      try{
        await emailjs.send("service_kdvgh9f","template_5xt5vlv",params);
        document.getElementById("formResa").reset();
        showSuccessModal();
      }catch(err){
        alert("‚ùå Erreur. R√©essayez.");
        formEnvoye=false;btn.disabled=false;
      }
    }

    function calculerEstimation(){
      return new Promise((resolve)=>{
        const d = depart.value, a = arrivee.value;
        const priceEl = document.getElementById("prixAffiche");
        const detEl = document.getElementById("detailsTrajet");
        if(!d || !a){ openFareBar(); resolve(null); return; }
        directionsService.route(
          {origin:d,destination:a,travelMode:google.maps.TravelMode.DRIVING},
          (result,status)=>{
            if(status==="OK"){
              directionsRenderer.setDirections(result);
              const leg=result.routes[0].legs[0];
              const distKm=leg.distance.value/1000;
              const duree=leg.duration.text;
              const prix=+(20+Math.max(0,distKm-7)*1.6).toFixed(2);
              priceEl.textContent=prix.toFixed(2)+" ‚Ç¨";
              detEl.textContent=`Distance : ${distKm.toFixed(1)} km ¬∑ Temps : ${duree}`;
              openFareBar();
              resolve({prix,distKm,duree});
            }else{
              priceEl.textContent="Estimation indisponible";
              detEl.textContent="";
              openFareBar();
              resolve(null);
            }
          }
        );
      });
    }

    function showSuccessModal(){
      document.getElementById('successModal').style.display='flex';
      document.body.style.overflow='hidden';
    }
    function hideSuccessModal(){
      document.getElementById('successModal').style.display='none';
      document.body.style.overflow='';
    }

    // scroll qui s'arr√™te bien (pas trop bas)
    function scrollToForm(){
      const target = document.getElementById('introForm');
      const nav = document.getElementById('topnav');
      const fare = document.getElementById('fare');
      const navH = nav ? nav.offsetHeight : 0;
      const fareH = (fare && fare.style.display === 'block') ? fare.offsetHeight : 0;
      const offset = navH + fareH + 12;
      const top = target.getBoundingClientRect().top + window.pageYOffset - offset;
      window.scrollTo({top,behavior:'smooth'});
    }

    document.addEventListener('DOMContentLoaded', () => {
      const reserveBtn = document.getElementById('reserveBtn');
      if(reserveBtn){
        reserveBtn.addEventListener('click', (e) => {
          e.preventDefault();
          trackEvent('clic_reserver','R√©server maintenant VTC Perpignan');
          scrollToForm();
        });
      }
    });

    let map,directionsService,directionsRenderer;
    function initMap(){
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 7,
        center: {lat:42.6887, lng:2.8948}
      });
      directionsService = new google.maps.DirectionsService();
      directionsRenderer = new google.maps.DirectionsRenderer({ map });
      const acOpts = { componentRestrictions: { country: "fr" } };
      new google.maps.places.Autocomplete(document.getElementById("depart"), acOpts);
      new google.maps.places.Autocomplete(document.getElementById("arrivee"), acOpts);
    }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAxEs2za_iEs5okAbU3H9fvJm0sRm0oG-A&callback=initMap&libraries=places&loading=async" async defer></script>
</body>
</html>
