<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OuassVTC - Réservation VTC à Perpignan</title>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5BG2J1H8TC"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-5BG2J1H8TC');
  </script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f5f5f5; margin: 0; padding: 0; }
    header { background-color: #000; padding: 20px; text-align: center; }
    header img { height: 140px; }
    .container { padding: 20px; max-width: 900px; margin: auto; }
    .car-image { width: 100%; max-width: 450px; display: block; margin: 0 auto 20px auto; }
    .buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 20px; }
    .buttons a { display: flex; align-items: center; gap: 5px; background-color: #000; color: white; padding: 10px 15px; border-radius: 5px; text-decoration: none; }
    .buttons a img { width: 20px; height: 20px; }
    .info { text-align: center; font-weight: bold; margin-bottom: 20px; }
    form { display: flex; flex-direction: column; gap: 10px; max-width: 500px; margin: 20px auto; }
    input, textarea, select { padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; }
    button { padding: 10px; background-color: #007bff; color: white; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; }
    .estimation { text-align: center; font-weight: bold; margin-top: 10px; }
    footer { background-color: #000; color: white; text-align: center; padding: 30px 10px; margin-top: 40px; }
    .hidden-keywords { display: none; }
    .localise-btn { background: none; border: none; position: absolute; right: 10px; top: 8px; cursor: pointer; }
    .relative { position: relative; }
  </style>
</head>
<body>
  <header>
    <img src="ouassvtc.png" alt="Logo OuassVTC" />
  </header>

  <div class="container">
    <img src="voiture.png" alt="Voiture VTC" class="car-image" />
    <div class="buttons">
      <a href="tel:0644120784"><img src="https://img.icons8.com/ios-filled/50/FFFFFF/phone.png"/> Appeler</a>
      <a href="https://wa.me/33644120784"><img src="https://img.icons8.com/ios-filled/50/FFFFFF/whatsapp.png"/> WhatsApp</a>
      <a href="sms:+33644120784"><img src="https://img.icons8.com/ios-filled/50/FFFFFF/sms.png"/> SMS</a>
      <a href="https://www.facebook.com/people/Ouass-Vtc/pfbid0Ti5DGSqRP1AvcZtZ8HGmCi6YUJLjcgwjJ12GFzv7KpknTsUjkK9TvA12XMo7sFgXl/"><img src="https://img.icons8.com/ios-filled/50/FFFFFF/facebook-new.png"/> Facebook</a>
      <a href="snapchat://add/ouassvtc"><img src="https://img.icons8.com/ios-filled/50/FFFFFF/snapchat.png"/> Snapchat</a>
    </div>

    <div class="info">
      <h2>Formulaire de réservation</h2>
      OuassVTC est votre service de transport privé basé à Perpignan. Nos chauffeurs professionnels sont disponibles 7j/7 pour tous vos déplacements avec ponctualité, sécurité et confort.
    </div>

    <form id="reservationForm" onsubmit="sendEmail(event)">
      <input type="text" id="nom" name="nom" placeholder="Nom" required />
      <input type="tel" id="telephone" name="telephone" placeholder="Téléphone" required />
      <div class="relative">
        <input type="text" id="depart" name="depart" placeholder="Adresse de départ" required />
        <button type="button" class="localise-btn" onclick="localiserUtilisateur()">
          <img src="https://img.icons8.com/ios-filled/20/000000/marker--v1.png" alt="Localiser" />
        </button>
      </div>
      <input type="text" id="arrivee" name="arrivee" placeholder="Adresse d'arrivée" required />
      <input type="datetime-local" id="dateheure" name="dateheure" required />
      <select id="passagers" name="passagers" required>
        <option value="">Nombre de passagers</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4+">4 ou plus</option>
      </select>
      <textarea id="message" name="message" placeholder="Informations complémentaires"></textarea>
      <button type="submit">Envoyer la demande</button>
    </form>

    <div class="estimation" id="prixEstime"></div>
    <div id="google_translate_element" style="text-align:center;margin-top:20px;"></div>
  </div>

  <footer>
    © 2025 OuassVTC. Tous droits réservés.
  </footer>

  <div class="hidden-keywords">
    Taxi Perpignan, VTC 66, Uber, G7, Bolt, réservation transport privé, Perpignan VTC, chauffeur VTC.
  </div>

  <script>
    (function(){ emailjs.init("U08QGWWRUenJDOllc"); })();

    function sendEmail(event) {
      event.preventDefault();
      const form = document.getElementById("reservationForm");
      const depart = document.getElementById("depart").value;
      const arrivee = document.getElementById("arrivee").value;
      const distanceText = document.getElementById("prixEstime").innerText;

      emailjs.send("service_kdvgh9f", "template_5xt5vlv", {
        nom: form.nom.value,
        telephone: form.telephone.value,
        depart: depart,
        arrivee: arrivee,
        dateheure: form.dateheure.value,
        passagers: form.passagers.value,
        message: form.message.value + "\n\n" + distanceText
      }).then(() => {
        alert("Votre demande a bien été envoyée !");
        form.reset();
        document.getElementById("prixEstime").innerText = "";
      }).catch(() => alert("Erreur lors de l'envoi. Veuillez réessayer."));
    }

    function estimateDistance() {
      const depart = document.getElementById("depart").value;
      const arrivee = document.getElementById("arrivee").value;
      if (!depart || !arrivee) return;
      const url = `https://router.project-osrm.org/route/v1/driving/${encodeURIComponent(depart)};${encodeURIComponent(arrivee)}?overview=false`;
      fetch(url).then(res => res.json()).then(data => {
        if (data.routes && data.routes.length) {
          const distanceKm = data.routes[0].distance / 1000;
          const distanceArrondie = Math.max(distanceKm, 7);
          const prix = Math.max(20, distanceArrondie * 1.6);
          document.getElementById("prixEstime").innerText =
            `Distance estimée : ${distanceKm.toFixed(1)} km | Prix estimé : ${prix.toFixed(2)} €`;
        }
      });
    }

    document.getElementById("depart").addEventListener("change", estimateDistance);
    document.getElementById("arrivee").addEventListener("change", estimateDistance);

    function localiserUtilisateur() {
      if (!navigator.geolocation) {
        alert("La géolocalisation n'est pas supportée.");
        return;
      }
      navigator.geolocation.getCurrentPosition(pos => {
        const { latitude, longitude } = pos.coords;
        fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`)
          .then(res => res.json())
          .then(data => {
            if (data.display_name) {
              document.getElementById("depart").value = data.display_name;
              estimateDistance();
            }
          });
      });
    }

    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'fr'}, 'google_translate_element');
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>






